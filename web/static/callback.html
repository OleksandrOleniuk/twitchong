<!DOCTYPE html>
<html>
<head>
    <title>Twitch OAuth Callback</title>
    <script>
        window.onload = function() {
            // Get the fragment data
            const fragment = window.location.hash.substring(1);
            if (fragment) {
                // Send the fragment data to our server
                fetch('/twitch/callback', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: fragment
                })
                .then(response => {
                    if (response.ok) {
                        console.log('Callback data sent successfully');
                        // Wait 5 seconds before redirecting
                        setTimeout(() => {
                            window.location.href = '/index.html';
                        }, 5000);
                    }
                })
                .catch(error => {
                    console.error('Error sending callback data:', error);
                });
            }
        };
    </script>
</head>
<body>
    <h1>Processing Twitch Authentication...</h1>
    <p>You will be redirected to the home page in 5 seconds.</p>
</body>
</html> 